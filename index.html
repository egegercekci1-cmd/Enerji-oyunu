<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Enerji Oyunu</title>

<style>
body {
  margin: 0;
  background: #111;
  color: white;
  font-family: Arial;
  overflow: hidden;
}

canvas {
  display: block;
  background: #222;
  touch-action: none;
}

/* ALT BUTONLAR */
#ui {
  position: fixed;
  bottom: 14px;
  left: 0;
  right: 0;
  pointer-events: none;
}
.ui-btn {
  pointer-events: auto;
  position: absolute;
  bottom: 0;
  background: rgba(0,0,0,0.6);
  color: white;
  border: 1px solid white;
  border-radius: 10px;
  padding: 10px 14px;
  font-size: 15px;
}
#frictionBtn { left: 14px; }
#fullscreenBtn { right: 14px; }

/* √úST BUTON */
#pauseBtn {
  position: fixed;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.6);
  color: white;
  border: 1px solid white;
  border-radius: 10px;
  padding: 8px 14px;
  font-size: 15px;
  z-index: 10;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<button id="pauseBtn">‚è∏Ô∏è Durdur</button>

<div id="ui">
  <button id="frictionBtn" class="ui-btn">üß≤ S√ºrt√ºnme: KAPALI</button>
  <button id="fullscreenBtn" class="ui-btn">‚õ∂ Tam Ekran</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* EKRAN */
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  updateOrigin();
}
window.addEventListener("resize", resize);
resize();

/* Fƒ∞Zƒ∞K */
const g = 0.015;
let frictionOn = false;
const friction = 0.995;

let angle = Math.PI / 6;
let speed = 0;
let dragging = false;
let paused = false;

/* ENERJƒ∞ */
const TOTAL = 100;
let shownPot = 50;
let shownKin = 50;

/* MERKEZ */
let L, origin;
function updateOrigin() {
  L = canvas.height * 0.45;
  origin = {
    x: canvas.width / 2,
    y: canvas.height * 0.18
  };
}

/* DOKUNMA */
canvas.addEventListener("touchstart", () => dragging = true);
canvas.addEventListener("touchmove", e => {
  if (!dragging || paused) return;
  const t = e.touches[0];
  const r = canvas.getBoundingClientRect();
  const x = t.clientX - r.left - origin.x;
  const y = t.clientY - r.top - origin.y;
  angle = Math.atan2(x, y);
  speed = 0;
});
canvas.addEventListener("touchend", () => dragging = false);

/* BUTONLAR */
const frictionBtn = document.getElementById("frictionBtn");
frictionBtn.onclick = () => {
  frictionOn = !frictionOn;
  frictionBtn.textContent = frictionOn
    ? "üß≤ S√ºrt√ºnme: A√áIK"
    : "üß≤ S√ºrt√ºnme: KAPALI";
};

document.getElementById("fullscreenBtn").onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};

const pauseBtn = document.getElementById("pauseBtn");
pauseBtn.onclick = () => {
  paused = !paused;
  pauseBtn.textContent = paused ? "‚ñ∂Ô∏è Devam" : "‚è∏Ô∏è Durdur";
};

/* G√úNCELLEME */
function update() {
  if (paused) return;

  if (!dragging) {
    speed += -g * Math.sin(angle);
    speed *= frictionOn ? friction : 1;
    angle += speed;
  }
}

/* ENERJƒ∞ BAR */
function drawBar(x, y, value, color, label) {
  const w = 220;
  const h = 18;

  ctx.strokeStyle = "white";
  ctx.strokeRect(x, y, w, h);

  ctx.fillStyle = color;
  ctx.fillRect(x, y, w * (value / TOTAL), h);

  ctx.fillStyle = "white";
  ctx.font = "14px Arial";
  ctx.fillText(label + ": " + value.toFixed(0), x, y - 4);
}

/* √áƒ∞Zƒ∞M */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const x = origin.x + L * Math.sin(angle);
  const y = origin.y + L * Math.cos(angle);

  // ip
  ctx.beginPath();
  ctx.moveTo(origin.x, origin.y);
  ctx.lineTo(x, y);
  ctx.strokeStyle = "white";
  ctx.lineWidth = 2;
  ctx.stroke();

  // top
  ctx.beginPath();
  ctx.arc(x, y, 22, 0, Math.PI * 2);
  ctx.fillStyle = "orange";
  ctx.fill();

  // enerji hesap
  let realPot = (1 - Math.cos(angle)) * TOTAL;
  realPot = Math.min(realPot, TOTAL);
  let realKin = TOTAL - realPot;

  const smooth = 0.05;
  shownPot += (realPot - shownPot) * smooth;
  shownKin += (realKin - shownKin) * smooth;

  drawBar(20, canvas.height - 100, shownPot, "#3498db", "Potansiyel");
  drawBar(20, canvas.height - 65, shownKin, "#e74c3c", "Kinetik");

  ctx.fillStyle = "white";
  ctx.font = "16px Arial";
  ctx.fillText("Toplam Enerji: 100", 20, canvas.height - 130);
}

/* OYUN D√ñNG√úS√ú */
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>