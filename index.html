<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enerji Oyunu</title>

<style>
body {
  margin: 0;
  background: #111;
  color: white;
  text-align: center;
  font-family: Arial;
}
canvas {
  background: #222;
  display: block;
  margin: auto;
  touch-action: none;
}
</style>
</head>

<body>

<h2>ðŸŽ® Enerjinin Korunumu</h2>
<p>Topu Ã§ek â†’ bÄ±rak</p>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ðŸ“± iPhone ekranÄ±na gÃ¶re boyut
canvas.width = window.innerWidth;
canvas.height = window.innerHeight * 0.75;

// ðŸ”§ Fizik ayarlarÄ± (YAVAÅž + DENGELÄ°)
const g = 0.015;
const L = canvas.height * 0.45;
let angle = Math.PI / 6;
let speed = 0;
let dragging = false;

const origin = {
  x: canvas.width / 2,
  y: canvas.height * 0.15
};

// ðŸ‘† Dokunma kontrolleri
canvas.addEventListener("touchstart", () => dragging = true);

canvas.addEventListener("touchmove", e => {
  if (!dragging) return;
  const t = e.touches[0];
  const r = canvas.getBoundingClientRect();
  const x = t.clientX - r.left - origin.x;
  const y = t.clientY - r.top - origin.y;
  angle = Math.atan2(x, y);
  speed = 0;
});

canvas.addEventListener("touchend", () => dragging = false);

// ðŸ”„ Oyun dÃ¶ngÃ¼sÃ¼
function update() {
  if (!dragging) {
    speed += -g * Math.sin(angle);
    speed *= 0.995; // aÅŸÄ±rÄ± hÄ±zlanmayÄ± Ã¶nler
    angle += speed;
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const x = origin.x + L * Math.sin(angle);
  const y = origin.y + L * Math.cos(angle);

  // ip
  ctx.beginPath();
  ctx.moveTo(origin.x, origin.y);
  ctx.lineTo(x, y);
  ctx.strokeStyle = "white";
  ctx.lineWidth = 2;
  ctx.stroke();

  // top
  ctx.beginPath();
  ctx.arc(x, y, 22, 0, Math.PI * 2);
  ctx.fillStyle = "orange";
  ctx.fill();

  // Enerji
  const PE = (1 - Math.cos(angle)) * 100;
  const KE = speed * speed * 800;

  ctx.fillStyle = "white";
  ctx.font = "16px Arial";
  ctx.fillText("Potansiyel: " + PE.toFixed(1), 10, 25);
  ctx.fillText("Kinetik: " + KE.toFixed(1), 10, 45);
  ctx.fillText("Toplam Enerji â‰ˆ Sabit", 10, 65);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>